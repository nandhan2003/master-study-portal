
<div class="main-content ">
    <div class="container-fluid ">
  
      <!-- <div class="col-md-12 " >
        <div class="row txtHeader">
          <p class="txtHeader"  >User List </p>
        </div>
      </div> -->
  
      <div class="row topserch">
        <div class="col-md-12 ">
          <div class="card " >
            <div class="cardHedr" >
              Booking
              <div class="pull-right">
                <button  class="btn2" (click)="onCreate()">Create Booking</button>
              </div>
            </div>
           
               
            <div class="card-body " >
              <form [formGroup]="formUserSearch" >
  
                <div class="row">
                  <div class="col-md-4 ">
                    <div class="form-group">
                      <div class="frmpos1">
                        <label class="lbltxt">  Service Name </label>
                        <input type="text" class="form-control inputtype" formControlName="name"
                        name=" name"  >
                      </div>
                    </div>
                  </div>
  
                  <div class="col-md-4 ">
                    <div class="form-group">
                      <div class="frmpos1">
                        <label class="lbltxt"> Date </label>
                        <input type="date" class="form-control inputtype" formControlName="date"
                        name="city"  >
                      </div>
                    </div>
                  </div>
  
                  <div class="col-md-4 ">
                    <div class="form-group">
                      <div class="frmpos1">
                        <label class="lbltxt"> Status </label>
                        <!-- <input type="combobox" class="form-control inputtype" formControlName="combobox"
                        name="city"  > -->
                        <select type="text" class="form-control inputtype" formControlName="cmbDetailStatusType1"
                        name="cmbDetailStatusType1"  >
                  
                          <option value="ALL"> ALL  </option>
                          <option value="PENDING"> PENDING  </option>
                          <option value="APPROVED"> APPROVED  </option>
                        </select>
                        
                      </div>
                    </div>
                  </div>
  
                  <div class="col-md-12 pull-right">
                    <div class="row pull-right">
                    <button  class="btn1"  (click)="getAllBookingList()">Search</button> 
                    </div>
                  </div>
  
                </div>
  
             </form>
             <div class="row">
              <div class="col-md-2">
                <div class="buttons">
                  <select class="form-group" (change)="getPageLimit($event.target.value)" style="padding: 0;">
                    <option *ngFor="let item of pageLimit;"  [value]=item.count>{{item.count}}</option>
                  </select>&nbsp;Entries
                </div>
              </div>
             
            
            </div>
        
            <div class="row ">
              <div class="col-md-12">
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table tblhead">
                        <thead >
                          <!-- <th> No.</th> -->
                          <th> User&nbsp;Name </th>
                          <th> Mobile </th>
                          <th> Service Name </th>
                          <th> Date </th>
                          <th> Time </th>
                          <th> Status </th>
                          <th></th>
                      
                        </thead>
                        <tr *ngFor="let obj of arryallUserData;let i = index" >
                        <!-- <td>{{i+1}}</td> -->
                        <td> {{obj.objUser.userName}} </td>
                        <td> {{obj.objUser.mobile}} </td>
                        <td > {{obj.objService.serviceName}} </td>
                        <td> {{obj.date}} </td>
                        <td> {{obj.time}} </td>
                        <td  >
                          <ng-template  [ngIf]="(obj.status) == 'PENDING'"  >
                            <p   class="txtpendng" (click)="openModal(UpdateTemplate,obj)">{{obj.status}}</p>
                          </ng-template>

                          <ng-template [ngIf]="(obj.status) == 'APPROVED'">
                          <p class="txtapprvd"  (click)="openModal(UpdateTemplate,obj)">  {{obj.status}}</p>
                          </ng-template>
                        </td>
                        <td>
                          <!-- <div class="btn5" (click)="onUpdate(obj)"><i class="fa fa-pencil" aria-hidden="true"></i> -->
                          <button class="btn5" (click)="onUpdate(obj)"><i class="fa fa-pencil" aria-hidden="true"></i></button>&nbsp;
                          <button class="btn4" (click)="openModal(DeleteTemplate,obj)"><i class="fa fa-remove" aria-hidden="true"></i></button>
                          <!-- </div>/ -->
                        </td>
                      </tr>
                      </table>
                      <div class="text-right table-responsive mt-2">
                        <nav aria-label="Page navigation example">
                          <ul class="pagination">
                            <li
                              class="page-item"
                              [ngClass]="{ disabled: pager.currentPage === 1 }"
                            >
                              <a class="page-link" (click)="setPage(1)">First</a>
                            </li>
                            <li
                              class="page-item"
                              [ngClass]="{ disabled: pager.currentPage === 1 }"
                            >
                              <a class="page-link" (click)="setPage(pager.currentPage - 1)"
                                >Previous</a
                              >
                            </li>
                            <li
                              class="page-item"
                              *ngFor="let page of pager.pages"
                              [ngClass]="{ active: pager.currentPage === page }"
                            >
                              <a class="page-link" (click)="setPage(page)">{{ page }}</a>
                            </li>
                            <li
                              class="page-item"
                              [ngClass]="{ disabled: pager.currentPage === pager.totalPages }"
                            >
                              <a class="page-link" (click)="setPage(pager.currentPage + 1)"
                                >Next</a
                              >
                            </li>
                            <li
                              class="page-item"
                              [ngClass]="{ disabled: pager.currentPage === pager.totalPages }"
                            >
                              <a class="page-link" (click)="setPage(pager.totalPages)"
                                >Last</a
                              >
                            </li>
                          </ul>
                        </nav>
                      </div>
                      <div  class="card card-body" *ngIf="!arryallUserData.length">
                        <div class="row">
                          <div class="col-12 text-center">
                            <h3>No data found. Please select above details</h3>
                          </div>
                        </div>
                      </div>
                    </div>
                  <!-- </div> -->
                </div>
              </div>
            </div>
  
            </div>
          </div>
        </div>
      </div>
  
    </div>
  </div>

  <ng-template #UpdateTemplate>
    <div class="card-body">
      <form  [formGroup]="UpdateForm" >
        <div class="modal-header">
          <h4 class="modal-title pull-center">Booking Status</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
          <p class="quest"> Change status</p>
          <div class="row" style="justify-content: center;display: flex;">
            <div class="col-md-6" >
              <div class="form-group">
                <!-- <label class="lbltxt"> Message </label> -->
                <select type="text" class="form-control inputtype" formControlName="cmbDetailStatusType"
                name="cmbDetailStatusType"  >
                  <option value=""> --Select Status-- </option>
                  <option value="PENDING"> PENDING  </option>
                  <option value="APPROVED"> APPROVED  </option>
                </select>
              </div>
            </div>
          </div>
          <div class="row btnpos"  >
            <button type="button" class="btncard"  *ngIf="modalRef" type="button"  (click)="modalRef.hide(clearStatus())"
            data-dismiss="modal" style="background-color: rgb(68, 65, 220);margin-right: 10px;"> <span class="fa fa-close"></span> Cancel </button>
            <button type="button" class="btncard" *ngIf="modalRef" type="button" (click)="modalRef.hide(onStatusChange(UpdateForm.value,objSelected))"
              data-dismiss="modal" style="background-color: rgb(104, 230, 99);"><span class="fa fa-check "></span> Submit </button>
          </div>
      </form>
    </div>
  
  </ng-template>

  
  <ng-template #DeleteTemplate>
    <div class="card-body">
      <form  [formGroup]="UpdateForm" >
        <div class="modal-header">
          <h4 class="modal-title pull-center">Delete Box</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <p class="quest"> Are you sure you want to Delete this account?</p>
          <div class="row" style="justify-content: center;display: flex;">
            <div class="col-md-6" >
           
            </div>
          </div>
          <div class="row btnpos"  >
            <button type="button" class="btncard"  *ngIf="modalRef" type="button"  (click)="modalRef.hide(clearStatus())"
            data-dismiss="modal" style="background-color: rgb(58, 56, 194);margin-right: 10px;"> <span class="fa fa-close"></span> Cancel </button>
            <button type="button" class="btncard" *ngIf="modalRef" type="button" (click)="modalRef.hide(onDeleteConfirm(objSelected))"
              data-dismiss="modal" style="background-color: rgb(230, 99, 99);"><span class="fa fa-check "></span> Delete </button>
          </div>
      </form>
    </div>
  
  </ng-template>
  